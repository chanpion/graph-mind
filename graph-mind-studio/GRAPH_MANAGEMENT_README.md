# 图库管理功能说明

## 功能概述

图库管理模块为图数据库管理系统提供了完整的连接管理功能，支持多种主流图数据库的连接配置和管理。

## 功能特性

### 1. 图连接管理
- 🔗 **多数据库支持**：支持 Neo4j、Nebula Graph、JanusGraph 三种主流图数据库
- 📊 **连接状态监控**：实时显示连接状态（已连接、未连接、连接中）
- 🔍 **搜索功能**：支持按连接名称和主机地址搜索
- 📝 **连接配置**：完整的连接参数配置（主机、端口、数据库名、用户名、密码等）
- 🧪 **连接测试**：测试连接并显示数据库信息（版本、节点数、边数等）

### 2. 连接操作
- ➕ **新增连接**：添加新的图数据库连接配置
- ✏️ **编辑连接**：修改现有连接配置
- 🗑️ **删除连接**：删除不需要的连接配置
- 🔌 **连接/断开**：手动控制连接状态
- 🔄 **刷新状态**：刷新连接列表和状态

### 3. 图数据管理
- 📁 **CSV数据导入**：支持从CSV文件导入节点和边数据
- 🔄 **数据映射配置**：将CSV列映射到图数据库属性
- 👁️ **数据预览**：导入前预览数据确保准确性
- ⚡ **导入向导**：五步向导简化数据导入流程

### 4. 用户体验
- 🎨 **现代化UI**：采用 Element Plus 组件库，界面美观
- 📱 **响应式设计**：支持桌面端和移动端
- ⚡ **实时反馈**：操作状态实时反馈
- 🛡️ **数据验证**：完整的表单验证和错误提示

## 支持的数据库类型

### 1. Neo4j
- **默认端口**: 7687 (Bolt), 7474 (HTTP)
- **特点**: 最流行的图数据库，支持 Cypher 查询语言
- **适用场景**: 社交网络、推荐系统、知识图谱
- **标签**: 最流行

### 2. Nebula Graph
- **默认端口**: 9669
- **特点**: 分布式图数据库，支持大规模图数据处理
- **适用场景**: 大规模图数据、分布式部署、高并发场景
- **标签**: 分布式

### 3. JanusGraph
- **默认端口**: 8182
- **特点**: 分布式图数据库，支持多种存储后端
- **适用场景**: 大规模图数据、分布式部署、多存储后端
- **标签**: 多后端

## 连接配置参数

### 基础配置
- **连接名称**: 用于标识连接的友好名称
- **数据库类型**: 选择对应的图数据库类型
- **主机地址**: 数据库服务器IP地址或域名
- **端口**: 数据库服务端口号
- **数据库名**: 目标数据库名称

### 认证配置
- **用户名**: 数据库访问用户名
- **密码**: 数据库访问密码

### 高级配置
- **连接池大小**: 连接池中最大连接数
- **超时时间**: 连接超时时间（秒）
- **描述**: 连接配置的详细描述

## 图数据加工

### 功能概述
图数据加工功能支持将外部CSV数据导入到图数据库中，包括节点数据和边数据。

### 使用流程
1. 选择目标图和数据类型（节点或边）
2. 上传CSV文件
3. 配置字段映射关系
4. 预览数据确认
5. 执行导入操作

### CSV格式要求
- **节点数据**：至少包含id字段，可选label和属性字段
- **边数据**：至少包含source和target字段，可选label和属性字段

## 使用指南

### 1. 添加新连接
1. 点击"新增连接"按钮
2. 填写连接配置信息
3. 选择数据库类型
4. 输入连接参数
5. 点击"确定"保存

### 2. 连接数据库
1. 在连接列表中找到目标连接
2. 点击"连接"按钮
3. 等待连接状态变为"已连接"
4. 连接成功后可以进行数据操作

### 3. 管理连接
- **编辑连接**: 点击"编辑"按钮修改配置
- **删除连接**: 点击"删除"按钮移除连接
- **断开连接**: 点击"断开"按钮关闭连接

### 4. 导入数据
1. 进入"图数据加工"页面
2. 选择目标图和数据类型
3. 上传CSV文件
4. 配置字段映射
5. 预览并确认数据
6. 执行导入操作

## 技术实现

### 1. 前端技术栈
- **Vue 3**: 使用 Composition API
- **Element Plus**: UI组件库
- **Pinia**: 状态管理
- **Vue Router**: 路由管理
- **Axios**: HTTP 客户端
- **Mock.js**: 模拟数据

### 2. 组件结构
```
src/
├── views/graph/connection/
│   └── Connection.vue          # 图连接管理主组件
├── api/
│   └── connection.js           # 图连接管理API
├── utils/
│   └── request.js              # Axios请求配置
└── mock/
    └── index.js                # Mock数据配置
```

### 3. 核心功能
- **连接状态管理**: 实时监控连接状态
- **表单验证**: 完整的输入验证
- **数据过滤**: 支持搜索和分页
- **响应式设计**: 适配不同屏幕尺寸
- **API集成**: 完整的CRUD操作
- **连接测试**: 测试连接并显示数据库信息

## 文件结构

```
src/
├── views/
│   └── graph/
│       └── connection/
│           └── Connection.vue    # 图连接管理页面
├── api/
│   └── connection.js             # 图连接管理API
├── utils/
│   ├── commonData.js             # 菜单配置
│   ├── icons.js                  # 图标配置
│   └── request.js                # Axios请求配置
├── mock/
│   └── index.js                  # Mock数据配置
└── router/
    └── index.js                  # 路由配置
```

## 配置说明

### 1. 菜单配置
在 `src/utils/commonData.js` 中配置菜单：
```javascript
{
    id: 200,
    authName: "图库管理",
    icon: "Share",
    path: '/home/graph',
    children: [
        { id: 200001, authName: "图连接管理", path: "/home/graph/connection", icon: "Link", children: [] }
    ]
}
```

### 2. 路由配置
在 `src/router/index.js` 中添加路由：
```javascript
{
    path: 'graph',
    name: 'Graph',
    component: MainLayout,
    meta: { title: '图库管理' ,closable: true },
    children: [
        { path: 'connection', name: 'Connection', component: Connection, meta: { title: '图连接管理',closable: true  } }
    ]
}
```

### 3. 图标配置
在 `src/utils/icons.js` 中添加图标：
```javascript
import { Share, Link } from '@element-plus/icons-vue'

export const iconComponents = {
    // ... 其他图标
    Share,
    Link
}
```

## 扩展功能

### 1. 连接测试
- 添加连接测试功能
- 验证连接参数的正确性
- 显示连接性能指标

### 2. 连接监控
- 实时监控连接状态
- 连接池使用情况
- 性能指标统计

### 3. 批量操作
- 批量导入连接配置
- 批量测试连接
- 批量导出配置

### 4. 安全增强
- 密码加密存储
- 连接日志记录
- 访问权限控制

## 注意事项

1. **安全性**: 生产环境中需要加密存储敏感信息
2. **性能**: 大量连接时需要考虑性能优化
3. **兼容性**: 不同版本的数据库可能有差异
4. **监控**: 建议添加连接监控和告警功能
5. **备份**: 定期备份连接配置信息

## 故障排除

### 常见问题
1. **连接失败**: 检查网络连接和防火墙设置
2. **认证错误**: 验证用户名和密码
3. **端口被占用**: 确认端口号正确且未被占用
4. **超时错误**: 调整超时时间设置

### 调试方法
1. 查看浏览器控制台错误信息
2. 检查网络请求状态
3. 验证连接参数配置
4. 测试数据库服务可用性 